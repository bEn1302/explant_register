{% load custom_filters %}
{% block content %}
    <!-- Messages -->
    {% if messages %}
        {% for message in messages %}
            {% if message.tags == 'success' %}
                <div class="alert alert-success alert-dismissible fade show" role="alert">
                    <strong>{{ message }}</strong>
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% elif message.tags == 'warning' %}
                <div class="alert alert-warning alert-dismissible fade show" role="alert">
                    <strong>{{ message }}</strong> Please try again...
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endif %}
        {% endfor %}
    {% endif %}
    <table id="explant-table" class="table {% if is_huefte %}huefte{% else %}knie{% endif %}">
    <thead>
        <tr>
        <th><input type="checkbox" id="selectAll"></th>
        <th class="text-center" scope="col">ID</th>
        <th class="text-center" scope="col">Ursache</th>
        <th class="text-center" scope="col">Verfügbarkeit</th>
        <th class="text-center" scope="col">Herkunftsort</th>
        <th class="text-center" scope="col">Entnahmedatum</th>
        <th class="text-center" scope="col">Eingangsdatum</th>
        <th class="text-center" scope="col">Bruchgeschehen</th>
        <th class="text-center" scope="col">Nutzungsdauer</th>
        <th class="text-center" scope="col">Reinigung</th>
        <th class="text-center" scope="col">Aktion</th>
        </tr>
    </thead>
    <tbody>
            {% for explant in data %}
                <tr class="table-row">
                    {% if is_huefte %}
                        <td><input type="checkbox" class="huefte-row-checkbox" name="selected_ids[]" value="{{ explant.id }}"></td>
                    {% else %}
                        <td><input type="checkbox" class="knie-row-checkbox" name="selected_ids[]" value="{{ explant.id }}"></td>
                    {% endif %}
                    <td class="text-center">{{ explant.id }}</td>
                    <td class="text-center trigger-text-cell" data-full-text="{{ explant.ursache }}">{{ explant.ursache|truncate:25 }}</td>
                    <td class="text-center" style="display: none;">{{ explant.ursache }}</td>
                    <td class="text-center">{{ explant.verfuegbarkeit }}</td>
                    <td class="text-center">{{ explant.herkunftsort }}</td>
                    <td class="text-center">{{ explant.entnahme_datum }}</td>
                    <td class="text-center">{{ explant.eingang_datum }}</td>
                    <td class="text-center trigger-text-cell" data-full-text="{{ explant.bruchgeschehen }}">{{ explant.bruchgeschehen|truncate:25 }}</td>
                    <td class="text-center">{{ explant.nutzungsdauer }}</td>
                    <td class="text-center">{{ explant.reinigung }}</td>
                    <td class="text-center">
                        <i class="trigger-cell"></i>
                        <!-- nur Icon anzeigen wenn man auch den Eintrag bearbeiten darf -->
                        {% if user.id == explant.owner %}
                            <a href="{% url 'explant_update' explant.id %}" style="color:black"><i class="bi bi-pencil-square"></i></a>
                        {% endif %}
                        <a href="" style="color:black"><i class="bi bi-person-circle"></i></a>
                    </td>
                    </tr>
                    <tr class="extended-row d-none">
                    <td colspan="11">
                        <div class="extended-content">
                            <div class="row">
                                {% if explant.bild %}
                                <div class="col-md-3 mt-3">
                                <!-- Extended content goes here -->
                                    <ul class="list-group">
                                        <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">Bild</li>
                                        <li class="list-group-item text-center"><img src="{{ explant.bild.url }}" alt="" width="200" class="mx-auto"></li>
                                    </ul>         
                                </div>
                                {% endif %}
                                {% if explant.lagerort %}
                                <div class="col-md-3 mt-3">
                                    <!-- Extended content goes here -->
                                    <ul class="list-group">
                                        <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                            Lagerort
                                            <!-- Button trigger modal -->
                                            {% if user.id == explant.owner %}
                                                <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#lagerortModal{{ explant.id }}">Update</button>
                                            {% endif %}
                                        </li>
                                        <li class="list-group-item">
                                        Schrank: {{ explant.lagerort.schrank }}
                                        </li>
                                        <li class="list-group-item">
                                        Kiste: {{ explant.lagerort.kiste }}
                                        </li>
                                    </ul>
                                    <!-- Modal -->
                                    <div class="modal fade" id="lagerortModal{{ explant.id }}" tabindex="-1" aria-labelledby="lagerortModalLabel{{ explant.id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                          <div class="modal-content">
                                            {% if explant.lagerort.pk %}
                                                <form id="update-form{{ explant.id }}" method="post" action="{% url 'lagerort_update' explant.lagerort.pk %}">
                                                    {% csrf_token %}
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Update Lagerort</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                            <div id="alert-container"></div>
                                                            <div class='form-group'>
                                                                <label for='schrank'>Schrank:</label>
                                                                <input type='number' class='form-control' id='schrank' name='schrank' value='{{ explant.lagerort.schrank }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='kiste'>Kiste:</label>
                                                                <input type='number' class='form-control' id='kiste' name='kiste' value='{{ explant.lagerort.kiste }}'>
                                                            </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="submit" class="btn btn-outline-primary">Update</button>
                                                    </div>
                                                </form>
                                            {% else %}
                                                <div class="modal-header">
                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">Update Lagerort</h1>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p>Lagerort ist nicht verfügbar.</p>
                                                </div>
                                            {% endif %}
                                          </div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% if explant.patient %}
                                <div class="col-md-3 mt-3">
                                    <ul class="list-group">
                                        <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                            Patient
                                            {% if user.id == explant.owner %}
                                                <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#patientModal{{ explant.id }}">Update</button>
                                            {% endif %}
                                        </li>
                                        <li class="list-group-item">
                                            Geburtsdatum: {{ explant.patient.geburtsdatum }}
                                        </li>
                                        <li class="list-group-item">
                                            Gewicht: {{ explant.patient.gewicht }} kg
                                        </li>
                                    </ul>
                                    <!-- Modal -->
                                    <div class="modal fade" id="patientModal{{ explant.id }}" tabindex="-1" aria-labelledby="patientModalLabel{{ explant.id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                {% if explant.patient.pk %}
                                                    <form id="update-form{{ explant.id }}" method="post" action="{% url 'patient_update' explant.patient.pk %}">
                                                        {% csrf_token %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Patient</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div id="patientModal" class="modal-body">
                                                            <div id="alert-container"></div>
                                                            <div class='form-group'>
                                                                <label for='geburtsdatum'>Geburtsdatum:</label>
                                                                <input type='date' class='form-control' id='geburtsdatum' name='geburtsdatum' value='{{ explant.patient.geburtsdatum }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='gewicht'>Gewicht:</label>
                                                                <input type='number' step="any" class='form-control' id='gewicht' name='gewicht' value='{{ explant.patient.gewicht }}'>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="submit" class="btn btn-outline-primary">Update</button>
                                                        </div>
                                                    </form>
                                                {% else %}
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Update Patient</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>Patient ist nicht verfügbar.</p>
                                                    </div>
                                                {% endif %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% if explant.reoperation %}
                                <div class="col-md-3 mt-3">
                                    <ul class="list-group">
                                        <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                            Reoperation
                                            {% if user.id == explant.owner %}
                                                <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#reoperationModal{{ explant.id }}">Update</button>
                                            {% endif %}
                                        </li>
                                        <li class="list-group-item">
                                            Reoperation: {{ explant.reoperation.reoperation }}
                                        </li>
                                        <li class="list-group-item">
                                            Datum: {{ explant.reoperation.reoperation_datum }}
                                        </li>
                                    </ul>
                                    <!-- Modal -->
                                    <div class="modal fade" id="reoperationModal{{ explant.id }}" tabindex="-1" aria-labelledby="reoperationModalLabel{{ explant.id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                {% if explant.reoperation.pk %}
                                                    <!-- Update Form ... -->
                                                    <form id="update-form{{ explant.id }}" method="post" action="{% url 'reoperation_update' explant.reoperation.pk %}">
                                                        {% csrf_token %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Reoperation</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div id="patientModal" class="modal-body">
                                                            <div id="alert-container"></div>
                                                            <!-- Forms -->
                                                            <div class='form-group'>
                                                                <label for='reoperation'>Reoperation:</label>
                                                                <input type='' class='form-control' id='reoperation' name='reoperation' value='{{ explant.reoperation.reoperation }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='reoperation_datum'>Datum:</label>
                                                                <input type='date' class='form-control' id='reoperation_datum' name='reoperation_datum' value='{{ explant.reoperation.reoperation_datum }}'>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="submit" class="btn btn-outline-primary">Update</button>
                                                        </div>
                                                    </form>
                                                {% else %}
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Update Reoperation</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>Reoperation ist nicht verfügbar.</p>
                                                    </div>
                                                {% endif %}
                                            </div>                                            
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% if explant.inlay %}
                                <div class="col-md-3 mt-3">
                                    <ul class="list-group">
                                        <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                            Inlay
                                            {% if user.id == explant.owner %}
                                                <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#inlayModal{{ explant.id }}">Update</button>
                                            {% endif %}    
                                        </li>
                                        <li class="list-group-item">
                                            Hersteller: {{ explant.inlay.hersteller }}
                                        </li>
                                        <li class="list-group-item">
                                            Modell: {{ explant.inlay.modell }}
                                        </li>
                                        <li class="list-group-item">
                                            Material: {{ explant.inlay.material }}
                                        </li>
                                        <li class="list-group-item">
                                            Größe: {{ explant.inlay.groeße }} mm
                                        </li>
                                    </ul>
                                    <!-- Modal -->
                                    <div class="modal fade" id="inlayModal{{ explant.id }}" tabindex="-1" aria-labelledby="inlayModalLabel{{ explant.id }}" aria-hidden="true">
                                        <div class="modal-dialog modal-dialog-centered">
                                            <div class="modal-content">
                                                {% if explant.inlay.pk %}
                                                    <!-- Update Form ... -->
                                                    <form id="update-form{{ explant.id }}" method="post" action="{% url 'inlay_update' explant.inlay.pk %}">
                                                        {% csrf_token %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Inlay</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div id="patientModal" class="modal-body">
                                                            <div id="alert-container"></div>
                                                            <!-- Forms -->
                                                            <div class='form-group'>
                                                                <label for='hersteller'>Hersteller:</label>
                                                                <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.inlay.hersteller }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='modell'>Modell:</label>
                                                                <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.inlay.modell }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='material'>Material:</label>
                                                                <input type='text' class='form-control' id='material' name='material' value='{{ explant.inlay.material }}'>
                                                            </div>
                                                            <div class='form-group'>
                                                                <label for='groeße'>Größe:</label>
                                                                <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.inlay.groeße }}'>
                                                            </div>
                                                        </div>
                                                        <div class="modal-footer">
                                                            <button type="submit" class="btn btn-outline-primary">Update</button>
                                                        </div>
                                                    </form>
                                                {% else %}
                                                    <div class="modal-header">
                                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Update Inlay</h1>
                                                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <p>Inlay ist nicht verfügbar.</p>
                                                    </div>
                                                {% endif %}
                                            </div>                                            
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                                {% if is_huefte %}
                                    {% if explant.kopf %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Kopf
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#kopfModal{{ explant.id }}">Update</button>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.kopf.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.kopf.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.kopf.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.kopf.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="kopfModal{{ explant.id }}" tabindex="-1" aria-labelledby="kopftModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.kopf.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'kopf_update' explant.kopf.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Kopf</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.kopf.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.kopf.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.kopf.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.kopf.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Kopf</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Kopf ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% else %}
                                    {% if explant.femurkomponente %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Femurkomponente
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#femurkomponenteModal{{ explant.id }}">Update</button>
                                                {% endif %}    
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.femurkomponente.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.femurkomponente.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.femurkomponente.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.femurkomponente.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="femurkomponenteModal{{ explant.id }}" tabindex="-1" aria-labelledby="femurkomponenteModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.femurkomponente.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'femurkomponente_update' explant.femurkomponente.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Femurkomponente</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.femurkomponente.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.femurkomponente.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.femurkomponente.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.femurkomponente.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Femurkomponente</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Femurkomponente ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endif %}
                                {% if is_huefte %}
                                    {% if explant.schaft %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Schaft
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#schaftModal{{ explant.id }}">Update</button>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.schaft.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.schaft.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.schaft.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.schaft.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="schaftModal{{ explant.id }}" tabindex="-1" aria-labelledby="schaftModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.schaft.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'schaft_update' explant.schaft.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Schaft</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.schaft.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.schaft.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.schaft.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.schaft.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Schaft</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Schaft ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% else %}
                                    {% if explant.tibiaplateau %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Tibiaplateau
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#tibiaplateauModal{{ explant.id }}">Update</button>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.tibiaplateau.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.tibiaplateau.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.tibiaplateau.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.tibiaplateau.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="tibiaplateauModal{{ explant.id }}" tabindex="-1" aria-labelledby="tibiaplateauModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.tibiaplateau.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'tibiaplateau_update' explant.tibiaplateau.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Tibiaplateau</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.tibiaplateau.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for' modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.tibiaplateau.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.tibiaplateau.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.tibiaplateau.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Tibiaplateau</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Tibiaplateau ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endif %}
                                {% if is_huefte %}
                                    {% if explant.pfanne %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Pfanne
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#pfanneModal{{ explant.id }}">Update</button>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.pfanne.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.pfanne.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.pfanne.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.pfanne.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="pfanneModal{{ explant.id }}" tabindex="-1" aria-labelledby="pfanneModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.pfanne.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'pfanne_update' explant.pfanne.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Pfanne</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.pfanne.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.pfanne.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.pfanne.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' step="any" class='form-control' id='groeße' name='groeße' value='{{ explant.pfanne.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Pfanne</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Pfanne ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% else %}
                                    {% if explant.patellaersatz %}
                                    <div class="col-md-3 mt-3">
                                        <ul class="list-group">
                                            <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                                                Patellaersatz
                                                {% if user.id == explant.owner %}
                                                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2" data-bs-toggle="modal" data-bs-target="#patellaersatzModal{{ explant.id }}">Update</button>
                                                {% endif %}
                                            </li>
                                            <li class="list-group-item">
                                                Hersteller: {{ explant.patellaersatz.hersteller }}
                                            </li>
                                            <li class="list-group-item">
                                                Modell: {{ explant.patellaersatz.modell }}
                                            </li>
                                            <li class="list-group-item">
                                                Material: {{ explant.patellaersatz.material }}
                                            </li>
                                            <li class="list-group-item">
                                                Größe: {{ explant.patellaersatz.groeße }} mm
                                            </li>
                                        </ul>
                                        <!-- Modal -->
                                        <div class="modal fade" id="patellaersatzModal{{ explant.id }}" tabindex="-1" aria-labelledby="patellaersatzModalLabel{{ explant.id }}" aria-hidden="true">
                                            <div class="modal-dialog modal-dialog-centered">
                                                <div class="modal-content">
                                                    {% if explant.patellaersatz.pk %}
                                                        <!-- Update Form ... -->
                                                        <form id="update-form{{ explant.id }}" method="post" action="{% url 'patellaersatz_update' explant.patellaersatz.pk %}">
                                                            {% csrf_token %}
                                                            <div class="modal-header">
                                                                <h1 class="modal-title fs-5" id="exampleModalLabel">Update Patellaersatz</h1>
                                                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                            </div>
                                                            <div id="patientModal" class="modal-body">
                                                                <div id="alert-container"></div>
                                                                <!-- Forms -->
                                                                <div class='form-group'>
                                                                    <label for='hersteller'>Hersteller:</label>
                                                                    <input type='text' class='form-control' id='hersteller' name='hersteller' value='{{ explant.patellaersatz.hersteller }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='modell'>Modell:</label>
                                                                    <input type='text' class='form-control' id='modell' name='modell' value='{{ explant.patellaersatz.modell }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='material'>Material:</label>
                                                                    <input type='text' class='form-control' id='material' name='material' value='{{ explant.patellaersatz.material }}'>
                                                                </div>
                                                                <div class='form-group'>
                                                                    <label for='groeße'>Größe:</label>
                                                                    <input type='number' class='form-control' id='groeße' name='groeße' value='{{ explant.patellaersatz.groeße }}'>
                                                                </div>
                                                            </div>
                                                            <div class="modal-footer">
                                                                <button type="submit" class="btn btn-outline-primary">Update</button>
                                                            </div>
                                                        </form>
                                                    {% else %}
                                                        <div class="modal-header">
                                                            <h1 class="modal-title fs-5" id="exampleModalLabel">Update Patellaersatz</h1>
                                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                        </div>
                                                        <div class="modal-body">
                                                            <p>Patellaersatz ist nicht verfügbar.</p>
                                                        </div>
                                                    {% endif %}
                                                </div>                                                
                                            </div>
                                        </div>
                                    </div>
                                    {% endif %}
                                {% endif %}
                            </div>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}