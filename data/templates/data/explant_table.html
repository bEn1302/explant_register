{% extends 'data/base.html' %} {% block table %}

{% if user.is_authenticated %}
  <style>
    .btn-outline-secondary:hover{
      text-decoration: none;
      color: #4f575d; 
      border-color: #4f575d; 
      background-color: transparent; 
    }
  </style>
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">Hüftexplantate</h1>
  </div>

  {% for explant in huefte_explant_table %}
  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Ursache</th>
        <th scope="col">Verfügbarkeit</th>
        <th scope="col">Herkunftsort</th>
        <th scope="col">Entnahmedatum</th>
        <th scope="col">Eingangsdatum</th>
        <th scope="col">Bruchgeschehen</th>
        <th scope="col">Nutzungsdauer</th>
        <th scope="col">Reinigung</th>
        <th scope="col">Aktion</th>
      </tr>
    </thead>
    <tbody>
      <tr class="table-row">
        <td>{{ explant.id }}</td>
        <td>{{ explant.ursache }}</td>
        <td>{{ explant.verfuegbarkeit }}</td>
        <td>{{ explant.herkunftsort }}</td>
        <td>{{ explant.entnahme_datum }}</td>
        <td>{{ explant.eingang_datum }}</td>
        <td>{{ explant.bruchgeschehen }}</td>
        <td>{{ explant.nutzungsdauer }}</td>
        <td>{{ explant.reinigung }}</td>
        <td>
          <i class="trigger-cell"></i>
          <i class="bi bi-pencil-square"></i>
          <i class="bi bi-trash3"></i>
        </td>
      </tr>
      <tr class="extended-row d-none">
        <td colspan="11">
          <div class="extended-content">
            <div class="row">
              <div class="col-md-3">
                <!-- Extended content goes here -->
                <ul class="list-group">
                  <li class="list-group-item">Bild: {{ explant.bild }}</li>
                </ul>
              </div>
              <div class="col-md-3">
                <!-- Extended content goes here -->
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                      Lagerort
                      <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Schrank: {{ explant.lagerort.schrank }}
                  </li>
                  <li class="list-group-item">
                    Kiste: {{ explant.lagerort.kiste }}
                  </li>
                </ul>
              </div>
              <div class="col-md-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Patient
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Geburtsdatum: {{ explant.patient.geburtsdatum }}
                  </li>
                  <li class="list-group-item">
                    Gewicht: {{ explant.patient.gewicht }} kg
                  </li>
                </ul>
              </div>
              <div class="col-md-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Reoperation
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Reoperation: {{ explant.reoperation.reoperation }}
                  </li>
                  <li class="list-group-item">
                    Datum: {{ explant.reoperation.reoperation_datum }}
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Inlay
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.inlay.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.inlay.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.inlay.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.inlay.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Kopf
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.kopf.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.kopf.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.kopf.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.kopf.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Schaft
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.schaft.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.schaft.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.schaft.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.schaft.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Pfanne
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.pfanne.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.pfanne.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.pfanne.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.pfanne.groeße }} mm
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  {% endfor %}
  <!----------------------
    Knieexplantat-Table 
    ----------------------->
  <br />
  <h2>Knieexplantate</h2>
  <table class="table">
    <thead>
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Ursache</th>
        <th scope="col">Verfügbarkeit</th>
        <th scope="col">Herkunftsort</th>
        <th scope="col">Entnahmedatum</th>
        <th scope="col">Eingangsdatum</th>
        <th scope="col">Bruchgeschehen</th>
        <th scope="col">Nutzungsdauer</th>
        <th scope="col">Reinigung</th>
        <th scope="col">Aktion</th>
      </tr>
    </thead>
    <tbody>
      {% for explant in knie_explant_table %}
      <tr class="table-row">
        <td>{{ explant.id }}</td>
        <td>{{ explant.ursache }}</td>
        <td>{{ explant.verfuegbarkeit }}</td>
        <td>{{ explant.herkunftsort }}</td>
        <td>{{ explant.entnahme_datum }}</td>
        <td>{{ explant.eingang_datum }}</td>
        <td>{{ explant.bruchgeschehen }}</td>
        <td>{{ explant.nutzungsdauer }} Jahre</td>
        <td>{{ explant.reinigung }}</td>
        <td>
          <i class="trigger-cell"></i>
          <i class="bi bi-pencil-square"></i>
          <i class="bi bi-trash3"></i>
        </td>
      </tr>
      <tr class="extended-row d-none">
        <td colspan="11">
          <div class="extended-content">
            <div class="row">
              <div class="col-md-3">
                <!-- Extended content goes here -->
                <ul class="list-group">
                  <li class="list-group-item">Bild: {{ explant.bild }}</li>
                </ul>
              </div>
              <div class="col-md-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Lagerort
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Schrank: {{ explant.lagerort.schrank }}
                  </li>
                  <li class="list-group-item">
                    Kiste: {{ explant.lagerort.kiste }}
                  </li>
                </ul>
              </div>
              <div class="col-md-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Patient
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Geburtsdatum: {{ explant.patient.geburtsdatum }}
                  </li>
                  <li class="list-group-item">
                    Gewicht: {{ explant.patient.gewicht }} kg
                  </li>
                </ul>
              </div>
              <div class="col-md-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Reoperation
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Reoperation: {{ explant.reoperation.reoperation }}
                  </li>
                  <li class="list-group-item">
                    Datum: {{ explant.reoperation.reoperation_datum }}
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Inlay
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.inlay.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.inlay.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.inlay.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.inlay.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Femurkomponente
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.femurkomponente.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.femurkomponente.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.femurkomponente.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.femurkomponente.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Tibiaplateau
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.tibiaplateau.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.tibiaplateau.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.tibiaplateau.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.tibiaplateau.groeße }} mm
                  </li>
                </ul>
              </div>
              <div class="col-md-3 mt-3">
                <ul class="list-group">
                  <li class="list-group-item list-group-item-secondary d-flex justify-content-between align-items-center">
                    Patellaersatz
                    <button type="button" class="btn btn-outline-secondary btn-sm me-md-2">Update</button>
                  </li>
                  <li class="list-group-item">
                    Hersteller: {{ explant.patellaersatz.hersteller }}
                  </li>
                  <li class="list-group-item">
                    Modell: {{ explant.patellaersatz.modell }}
                  </li>
                  <li class="list-group-item">
                    Material: {{ explant.patellaersatz.material }}
                  </li>
                  <li class="list-group-item">
                    Größe: {{ explant.patellaersatz.groeße }} mm
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
    {% endfor %}
  </table>

  <!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
      const triggerCells = document.querySelectorAll(".trigger-cell");

      let plus = true;
      triggerCells.forEach((cell) => {
        cell.addEventListener("click", function () {
          const extendedRow = this.closest(".table-row").nextElementSibling;
          extendedRow.classList.toggle("d-none");
          if (plus) {
            cell.innerHTML = '<i class="bi bi-dash-circle"></i>';
          } else {
            cell.innerHTML = '<i class="bi bi-plus-circle"></i>';
          }
          plus = !plus;
        });
      });
    });
  </script> -->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const triggerCells = document.querySelectorAll(".trigger-cell");
  
      triggerCells.forEach((cell) => {
        // Create an icon element and add it to the cell
        const icon = document.createElement("i");
        icon.classList.add("bi", "bi-plus-circle");
        cell.appendChild(icon);
  
        cell.addEventListener("click", function () {
          const extendedRow = this.closest(".table-row").nextElementSibling;
  
          // Toggle the visibility of the extended row
          extendedRow.classList.toggle("d-none");
  
          // Toggle the class of the icon to change its appearance
          icon.classList.toggle("bi-plus-circle");
          icon.classList.toggle("bi-dash-circle");
        });
      });
    });
  </script>
  
  

{% else %}
    {% url 'start' as start %}
    <script>
        window.location.href = "{{ start }}";
    </script>

{% endif %}

{% endblock %}
